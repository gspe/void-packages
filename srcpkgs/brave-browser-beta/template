# Template file for 'brave-browser-beta'
pkgname=brave-browser-beta
version=1.23.57
revision=1
archs="x86_64"
build_style=fetch
hostmakedepends=""
makedepends=""
depends="desktop-file-utils hicolor-icon-theme"
short_desc="Next generation Brave browser"
maintainer="Giuseppe Fierro <gspe@offlink.xyz>"
license="MPL-2.0"
homepage="https://brave.com"
distfiles="https://github.com/brave/brave-browser/releases/download/v${version}/${pkgname}_${version}_amd64.deb"
checksum=6a402f044296731d6287e07a6d3fde56739fdae51475845602f079cd491862a3
nostrip=yes

do_extract() {
	ar x ${XBPS_SRCDISTDIR}/${pkgname}-${version}/brave-browser-beta_${version}_amd64.deb
	bsdtar xf data.tar.xz --exclude={./etc,./opt/brave.com/brave-beta/cron}
}
do_install() {
	vcopy opt opt
	vmkdir usr/bin
	ln -s /opt/brave.com/brave-beta/brave-browser-beta ${DESTDIR}/usr/bin/brave-browser-beta
	vinstall usr/share/applications/brave-browser-beta.desktop 0644 \
		usr/share/applications
	vinstall opt/brave.com/brave-beta/product_logo_128_beta.png 0644 \
		usr/share/icons/hicolor/128x128/apps brave-browser-beta.png
	vman usr/share/man/man1/brave-browser-beta.1.gz
	# suid sandbox
	chmod 4755 ${DESTDIR}/opt/brave.com/brave-beta/chrome-sandbox
}
